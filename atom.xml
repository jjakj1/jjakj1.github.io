<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>jjakj1&#39;s blog</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-04-27T13:47:10.525Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Shanyu Li</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ğŸ± iOS è‡ªåŠ¨å¸ƒå±€å’Œ Masonry æ¡†æ¶</title>
    <link href="http://example.com/2022/03/28/%F0%9F%8D%B1%20%20iOS%20%E8%87%AA%E5%8A%A8%E5%B8%83%E5%B1%80%E5%92%8C%20Masonry%20%E6%A1%86%E6%9E%B6/"/>
    <id>http://example.com/2022/03/28/%F0%9F%8D%B1%20%20iOS%20%E8%87%AA%E5%8A%A8%E5%B8%83%E5%B1%80%E5%92%8C%20Masonry%20%E6%A1%86%E6%9E%B6/</id>
    <published>2022-03-28T03:28:00.000Z</published>
    <updated>2022-04-27T13:47:10.525Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€å•ä»‹ç»äº†ä¸€äº›å…³äº iOS è‡ªåŠ¨å¸ƒå±€çš„æ¦‚å¿µï¼Œå¹¶å¯¹ Masonry æ¡†æ¶è¿›è¡Œäº†åˆ†æã€‚ä¸»è¦ä»‹ç»äº† Masonry æ¡†æ¶ä¸»è¦ç»“æ„ï¼Œä½¿ç”¨æ—¶å†…éƒ¨è°ƒç”¨è¿‡ç¨‹å’Œä¸€äº›éœ€è¦æ³¨æ„çš„ç»†èŠ‚ã€‚</p><span id="more"></span><h2 id="iOS-å¸ƒå±€æ–¹æ³•"><a href="#iOS-å¸ƒå±€æ–¹æ³•" class="headerlink" title="iOS å¸ƒå±€æ–¹æ³•"></a>iOS å¸ƒå±€æ–¹æ³•</h2><p>iOS å‘å±•æ—©æœŸç”±äºè®¾å¤‡å±å¹•å¤§å°å›ºå®šï¼Œå› æ­¤ä¸éœ€è¦è€ƒè™‘å±å¹•å¤§å°å·®å¼‚äº§ç”Ÿçš„é€‚é…é—®é¢˜ï¼Œé‡‡ç”¨çš„æ˜¯ç›´æ¥æŒ‡å®š View çš„ä½ç½®å’Œå¤§å°ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIView</span> *view = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line"><span class="comment">// æŒ‡å®š view çš„å·¦ç«¯ï¼Œä¸Šç«¯è·ç¦»çˆ¶ view çš„è·ç¦»ä¸º10ï¼Œå®½é«˜å‡ä¸º 50</span></span><br><span class="line">view.frame = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure><p>è®¾å®šä¸€ä¸ª view çš„å¸ƒå±€ï¼Œéœ€è¦æ¯æ¬¡éƒ½å¯¹ä»¥ä¸Šå±æ€§è¿›è¡Œè®¡ç®—ã€‚å½“éœ€è¦æ”¹å˜æ—¶ï¼Œéœ€è¦å¯¹ä¸Šé¢çš„4ä¸ªå±æ€§è¿›è¡Œé‡æ–°è®¡ç®—ã€‚</p><p>åæ¥è‹¹æœå¯¹æ¯ä¸€ä¸ª view æ·»åŠ äº† <code>autoresizingMask</code> å±æ€§ï¼Œèƒ½å¤Ÿè®©ä¸€ä¸ª view åœ¨çˆ¶ view è¿›è¡Œå˜åŠ¨æ—¶æ ¹æ®è¿™ä¸ªå±æ€§æ¥è¿›è¡Œè°ƒæ•´ã€‚å¦‚ <code>UIViewAutoresizingFlexibleLeftMargin</code> è¡¨ç¤ºè¯¥ view åœ¨çˆ¶ view å˜åŠ¨æ—¶ï¼Œå·¦è¾¹è¾¹è·å¯ä»¥è¿›è¡Œå˜åŒ–ã€‚å¯ä»¥ä½¿ç”¨ä½ä¸è¿ç®—è¿æ¥å¤šä¸ªè¿™æ ·çš„å±æ€§ã€‚</p><p>autoresizingMask ä¹Ÿå­˜åœ¨å…¶å±€é™æ€§ï¼Œç”±äºå…¶åªèƒ½è®¾ç½®å’Œçˆ¶ view ä¹‹é—´çš„å…³ç³»ï¼Œç¼ºä¹çµæ´»æ€§ï¼Œåªèƒ½ç”¨äºä¸€å°éƒ¨åˆ†çš„çº¦æŸè®¾ç½®ã€‚</p><p>ä¹‹åä» iOS6 å¼€å§‹ï¼Œè‹¹æœå¼•å…¥äº†è‡ªåŠ¨å¸ƒå±€ï¼Œé€šè¿‡ä¸€ç§çº¦æŸæ¥è®¾ç½® view ä¹‹é—´çš„å…³ç³»ï¼Œå¸®åŠ©å¼€å‘è€…æ›´æ–¹ä¾¿å¿«æ·çš„é€‚é…å¤šç§å¤§å°çš„å±å¹•ã€‚</p><p>ä¸€ä¸ªçº¦æŸï¼ˆconstraintï¼‰é€šå¸¸å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªä»¥ä¸‹çš„ç­‰å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Item A&#x27;s Attribute = Multiplier * Item B&#x27;s Attribute + Constant</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ‰€æœ‰ view ä¸Šçš„çº¦æŸï¼Œè½¬æ¢ä¸ºä¸€ä¸ªçº¿æ€§è§„åˆ’é—®é¢˜ï¼Œå¹¶æœ€ç»ˆè¿›è¡Œæ±‚è§£ï¼Œè¯¦æƒ…å¯å‚è€ƒè®ºæ–‡ <a href="https://constraints.cs.washington.edu/solvers/uist97.pdf">ã€ŠSolving Linear Arithmetic Constraints for User Interface Applicationsã€‹</a>ã€‚</p><blockquote><p>ç”±äºè‡ªåŠ¨å¸ƒå±€æ¶‰åŠåˆ°è®¡ç®—ï¼Œå› æ­¤é€šå¸¸æ€§èƒ½ä¼šè¾ƒ frame çš„å¸ƒå±€æ–¹å¼å·®ã€‚</p></blockquote><h2 id="Masonry"><a href="#Masonry" class="headerlink" title="Masonry"></a>Masonry</h2><p>ç”±äºå®˜æ–¹æä¾›çš„è‡ªåŠ¨å¸ƒå±€ api è¾ƒä¸ºç¹çï¼Œé€šå¸¸è®¾ç½®ä¸€ä¸ªçº¦æŸå°±è¦å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// view1 ä¸Šç«¯è·ç¦» view2 ä¸Šç«¯ 10</span></span><br><span class="line">[<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                             attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                             relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                toItem:view2</span><br><span class="line">                             attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                            multiplier:<span class="number">1.0</span></span><br><span class="line">                              constant:padding.top]</span><br></pre></td></tr></table></figure><p>å› æ­¤åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ <a href="https://github.com/SnapKit/Masonry">Masonry</a> æ¡†æ¶è¿›è¡Œå¼€å‘ï¼ŒMasonry æ¡†æ¶å°è£…äº†å®˜æ–¹ api å¹¶æä¾›äº†ä¸€ç§ç®€å•çš„é“¾å¼è°ƒç”¨è¯­æ³•ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹Ÿæ˜¯ view1 ç¦» view2 é¡¶éƒ¨æœ‰ 10 çš„è·ç¦»</span></span><br><span class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.mas_equalTo(view2.mas_top).mas_offset(<span class="number">10</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>è€Œåœ¨æ·»åŠ å¤šä¸ªçº¦æŸæ—¶ï¼ŒMasonry ä¼šæ›´åŠ æ–¹ä¾¿ã€‚</p><p>é€šè¿‡å­¦ä¹  Masonry çš„æºç ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè¿›ä¸€æ­¥äº†è§£è‡ªåŠ¨å¸ƒå±€ï¼Œå¹¶å‡å°‘åœ¨æ—¥å¸¸å¼€å‘ä¸­å¼•å…¥çš„å¸ƒå±€é—®é¢˜ã€‚</p><p>Masonry ä¸­çš„ <code>MASViewAttribute</code> ä»£è¡¨äº†å…¬å¼ä¸­çš„ä¸€ä¸ª item and Attributeã€‚<code>MASConstraints</code> ä»£è¡¨äº†ä¸Šæ–‡ä¸­çš„ä¸€ä¸ªçº¦æŸå…¬å¼ï¼Œæœ€ç»ˆé€šè¿‡å®˜æ–¹çš„ api æ¿€æ´»æˆ <code>NSLayoutConstraints</code> åŠ åˆ°viewä¸Šé¢ã€‚</p><p>Masonry ä¸­çš„ä¸€äº›ç±»å¤§è‡´å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://res.craft.do/user/full/ea081854-0d6c-dace-b07b-5007ad758cc9/doc/0F73AF4D-EB6C-437C-9640-A7EA15797C87/0FE954FF-5CEF-4346-B71A-CF09E47B9D10_2/O5fsv2WRqFy69E0Gv7UOsopv4bod0jOb7chSbOYxqJ8z/Masonry.png" alt="Masonry.png"></p><p>ä¸‹æ–‡ä¸­æˆ‘ä»¬å°†é¦–å…ˆå¯¹ä¸€äº›ç±»è¿›è¡Œåˆ†æï¼Œæœ€åè¿›è¡Œ3ä¸ªæ—¥å¸¸ä¸­æœ€å¸¸è§å®ä¾‹çš„åˆ†æï¼Œè¿›ä¸€æ­¥äº†è§£æ•´ä¸ªæ¡†æ¶çš„å·¥ä½œè¿‡ç¨‹ã€‚</p><h3 id="View-MASAdditions"><a href="#View-MASAdditions" class="headerlink" title="View+MASAdditions"></a>View+MASAdditions</h3><p>å®šä¹‰äº†ä¸€äº› <code>MASViewAttribute</code> å±æ€§ï¼Œå¦‚ <code>mas_top</code> ç­‰ã€‚è¿™äº›å±æ€§çš„ getter éƒ½æ˜¯ä¼ å…¥ self ä½œä¸º viewï¼Œå¹¶ä¼ å…¥å¯¹åº”çš„ <code>NSLayoutAttribute</code> å¯¹ <code>MASViewAttribute</code> è¿›è¡Œåˆå§‹åŒ–ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (MASViewAttribute *)mas_top &#123;</span><br><span class="line">    <span class="keyword">return</span> [[MASViewAttribute alloc] initWithView:<span class="keyword">self</span> layoutAttribute:<span class="built_in">NSLayoutAttributeTop</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>MASViewAttribute</code> ä¸»è¦åŒ…æ‹¬ä¸€ä¸ª view å’Œä¸€ä¸ª <code>NSLayoutAttribute</code>ã€‚</p></blockquote><p>å®šä¹‰äº† <code>mas_makeConstraints</code>, <code>mas_updateConstraints</code> å’Œ <code>mas_remakeConstraints</code> ä¸‰ä¸ªæ–¹æ³•ã€‚è¿™ä¸‰ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨ Masonry çš„æ ¸å¿ƒæ–¹æ³•ï¼Œåˆ†åˆ«çš„ä½¿ç”¨åœºæ™¯ä¸ºï¼š</p><ul><li><code>mas_makeConstraints</code>ï¼šæœ€åˆåˆ›å»º constraints æ—¶ä½¿ç”¨ã€‚</li><li><code>mas_updateConstraints</code>ï¼šå¯¹äºæŸä¸ª constraint çš„å¸¸æ•°è¿›è¡Œæ›´æ”¹æ—¶ä½¿ç”¨ï¼Œæ³¨æ„è¯¥æ–¹æ³•åªèƒ½æ›´æ–° constraint çš„å¸¸æ•°ã€‚å¦‚æœå¸Œæœ›é‡æ–°è®¾ç½®é’ˆå¯¹çš„ viewï¼Œéœ€è¦ä½¿ç”¨ <code>mas_remakeConstraints</code>ã€‚åŸå› å°†åœ¨åé¢å®ä¾‹åˆ†æçš„æœ€åæ­¥éª¤ä¸­è¿›è¡Œè¿›ä¸€æ­¥è®²è§£ã€‚</li><li><code>mas_remakeConstraints</code> å°†ä¼šç§»é™¤ä¹‹å‰çš„æ‰€æœ‰ constraintï¼Œå¹¶è¿›è¡Œé‡æ–°è®¾ç½®ï¼Œæ³¨æ„ä¸€å®šè¦ä¿è¯é‡æ–°è®¾ç½®åçš„ constraint ä¾ç„¶èƒ½å¤Ÿå®Œæ•´çš„ç¡®å®šè¯¥ view çš„ä½ç½®å’Œå¤§å°ã€‚</li></ul><p>ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•æµç¨‹ä¸€è‡´ï¼Œéƒ½æ˜¯åˆ›å»ºäº†ä¸€ä¸ª <code>MASConstraintMaker</code>ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ å…¥æ–¹æ³•å‚æ•°çš„ block ä¸­ã€‚æœ€åè°ƒç”¨ <code>[MASConstraintMaker install]</code>ã€‚å…¶ä¸­ update è®¾ç½®äº† installer çš„ <code>updateExisting</code> ä¸º YESï¼Œremake è®¾ç½®äº† installer çš„ <code>removeExisting</code> ä¸º YESã€‚</p><p><code>translatesAutoresizingMaskIntoConstraints</code> å±æ€§ä¸º YESï¼Œå°†ä¼šæŠŠå¯¹ frame çš„è®¾ç½®è‡ªåŠ¨è½¬æ¢ä¸ºè‡ªåŠ¨å¸ƒå±€çº¦æŸï¼Œä½†è¿™ç§è‡ªåŠ¨è½¬æ¢å¯èƒ½ä¼šå¸¦æ¥çº¦æŸä¸Šçš„å†²çªï¼Œå› æ­¤è®¾ç½®ä¸º NOï¼Œä¼šå°†å¯¹ frame çš„è®¾ç½®å¿½ç•¥ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(<span class="type">void</span>(^)(MASConstraintMaker *))block &#123;</span><br><span class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</span><br><span class="line">    MASConstraintMaker *constraintMaker = [[MASConstraintMaker alloc] initWithView:<span class="keyword">self</span>];</span><br><span class="line">    block(constraintMaker);</span><br><span class="line">    <span class="keyword">return</span> [constraintMaker install];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸‰ä¸ªæ–¹æ³•å¤´æ–‡ä»¶ä¸­å¯¹ block åŠ äº† <code>void(^NS_NOESCAPE)</code> é™åˆ¶ï¼Œè¡¨ç¤ºè¯¥ block ä¼šåœ¨æ–¹æ³•ç»“æŸå‰è¢«è°ƒç”¨å®Œæˆï¼Œç¼–è¯‘å™¨èƒ½åˆ©ç”¨è¿™ä¸ªä¿¡æ¯æ›´å¥½çš„ç®¡ç†å†…å­˜ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦ä¼ å…¥ weak selfã€‚</p></blockquote><blockquote><p>objective-c é»˜è®¤æ˜¯ escapingï¼ŒSwift é»˜è®¤æ˜¯ no escapeï¼ŒSwift ä¸­ä½¿ç”¨ <code>@escaping</code> å…³é”®å­—ã€‚</p></blockquote><h3 id="View-MASShorthandAdditions"><a href="#View-MASShorthandAdditions" class="headerlink" title="View+MASShorthandAdditions"></a>View+MASShorthandAdditions</h3><p>å¦‚æœå®šä¹‰äº† <code>MAS_SHORTHAND</code> å®ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>top</code> ä»£æ›¿ <code>mas_top</code>ï¼Œä½¿ç”¨ <code>makeConstraints</code> ä»£æ›¿ <code>mas_makeConstraints</code>ï¼Œè¿™äº›ç¼©å†™çš„å®šä¹‰ï¼Œå®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨äº†æœ‰ <code>mas_</code> å¼€å¤´çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><p>æœäº†ä¸‹ä¸»ç«™é‡Œé¢æ²¡æœ‰åœ°æ–¹æœ‰ <code>#define MAS_SHORTHAND</code>ã€‚å› æ­¤åœ¨ä¸»ç«™å¼€å‘ä¸­æŒ‰ç…§æ ‡å‡†å†™æ³•è¿˜æ˜¯åº”è¯¥è°ƒç”¨å¸¦æœ‰ <code>mas_</code> çš„å±æ€§ã€‚</p><blockquote><p>ğŸ“Œ å¯¹ä¸»ç«™é‡Œé¢æœ‰å†™ç¼©å†™çš„åœ°æ–¹ jump to definition è·³è½¬åˆ°äº† UIView+KSGeometryã€‚ç¼–è¯‘å™¨æ²¡æœ‰å¯¹äºä¸€äº›åœ°æ–¹ç±»ä¼¼äºä½¿ç”¨ <code>.bottom</code> ä»£æ›¿ <code>.mas_bottom</code> çš„å†™æ³•æ²¡æœ‰æŠ¥é”™çš„åŸå› åªæ˜¯å› ä¸ºå·¥ç¨‹å†…éƒ¨å®ç°äº†ä¸€ä¸ªèƒ½è¿”å› view åº•éƒ¨ view ä½ç½®æµ®ç‚¹æ•°çš„æ–¹æ³•ï¼Œä½†è¿™ç§å†™æ³•å…¶å®åœ¨ <code>mas_equalTo</code> ä¸­ä¼ å…¥çš„æ˜¯ä¸€ç§ç»å¯¹å€¼ï¼Œå®é™…æä¾›çš„çº¦æŸè§„åˆ™æ˜¯ç›¸å¯¹äº superview å¤šå°‘ä¸ªåƒç´ ï¼ˆä¼ å…¥å¸¸æ•°æ—¶ï¼Œå°†ä¼šè®¾ç½®æˆç›¸å¯¹äºå…¶ superview å¯¹åº”æ–¹ä½çš„è·ç¦»ï¼‰ï¼Œå¯èƒ½åç»­ç»´æŠ¤çš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚</p></blockquote><p>æˆ‘è¿›ä¸€æ­¥åœ¨ä¸»ç«™å†…å¯¹ä¸Šé¢è¿›è¡Œå°è¯•äº†ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯åŒæ—¶è¿›è¡Œè‡ªåŠ¨å¸ƒå±€çš„ä¸€ä¸ªå¦ä¸€ä¸ª view2 å¯¹å…¶çš„å±æ€§ä½¿ç”¨æ‰€å†™çš„æ–¹å¼ï¼Œç”±äºå…¶æ²¡æ¸²æŸ“å®Œï¼Œä¸€èˆ¬ä¼šè¿”å›0ï¼Œæ­¤æ—¶åœ¨æŸäº›æƒ…å†µä¸‹æ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ï¼Œæ¯”å¦‚ view2 æ˜¯ view1 çš„çˆ¶ viewï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIView</span> *view1 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line"><span class="built_in">UIView</span> *view2 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">[view1 addSubview:view2];</span><br><span class="line"></span><br><span class="line">[view2 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.mas_equalTo(view1.top).mas_equalTo(<span class="number">10</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ç”±äº view1.top å–åˆ°çš„æ˜¯ 0ï¼Œç›¸å½“äºè®¾å®š view2 çš„é¡¶éƒ¨è·ç¦»å…¶ superview æ˜¯ 0+10ï¼Œå’Œé¢„æœŸæ˜¯ç›¸åŒçš„ã€‚å› æ­¤ä¸ä¼šå‡ºé”™ã€‚</p><p>å¦ä¸€ç§å¯èƒ½æ€§å¯èƒ½æ˜¯çœ‹èµ·æ¥ä¸ä¼šå‡ºé”™ï¼Œæ¯”å¦‚è®¾å®šç›¸å¯¹äº view controller é‡Œé¢ view çš„ bottomï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in a view controller</span></span><br><span class="line"><span class="built_in">UIView</span> *view = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">[<span class="keyword">self</span>.view addSubview:view];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[view mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    ...</span><br><span class="line">    make.bottom.mas_equalTo(<span class="keyword">self</span>.view.bottom);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>å‡è®¾æ ¹æ®åˆ†ç±»çš„å®šä¹‰ï¼Œè¿™ä¸ªæ—¶å€™ <code>self.view.bottom</code> è¿”å›äº† 1000 å…¶å®ç›¸å½“äºè®¾ç½® <code>make.bottom.mas_equalTo(self.view.mas_bottom).mas_offset(1000)</code>ï¼Œä½†ç”±äºå¤šå‡ºçš„éƒ¨åˆ†éƒ½åœ¨å±å¹•å¤–é¢ï¼Œå› æ­¤çœ‹èµ·æ¥å’Œæ­£ç¡®çš„è®¾ç½®æ–¹å¼æ²¡æœ‰åŒºåˆ«ã€‚</p><h3 id="NSArray-MASAdditions"><a href="#NSArray-MASAdditions" class="headerlink" title="NSArray+MASAdditions"></a>NSArray+MASAdditions</h3><p>åŒæ ·æä¾›äº† <code>mas_makeConstraints</code>, <code>mas_updateConstraints</code> å’Œ <code>mas_remakeConstraints</code> ä¸‰ä¸ªæ–¹æ³•ã€‚é€šè¿‡æ•°ç»„è°ƒç”¨è¿™ä¸‰ä¸ªæ–¹æ³•æ—¶ï¼Œè¦ä¿è¯æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ <code>UIView</code> ç±»å‹ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•çš„è°ƒç”¨å†…éƒ¨ä¼šéå†æ•´ä¸ªæ•°ç»„å†…çš„æ‰€æœ‰ viewï¼Œå¹¶é’ˆå¯¹æ¯ä¸ª view è°ƒç”¨å¯¹åº”çš„æ–¹æ³•æ¥è®¾ç½® view çš„çº¦æŸã€‚</p><p>å¤šæä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)mas_distributeViewsAlongAxis:(MASAxisType)axisType withFixedSpacing:(<span class="built_in">CGFloat</span>)fixedSpacing leadSpacing:(<span class="built_in">CGFloat</span>)leadSpacing tailSpacing:(<span class="built_in">CGFloat</span>)tailSpacing;</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)mas_distributeViewsAlongAxis:(MASAxisType)axisType withFixedItemLength:(<span class="built_in">CGFloat</span>)fixedItemLength leadSpacing:(<span class="built_in">CGFloat</span>)leadSpacing tailSpacing:(<span class="built_in">CGFloat</span>)tailSpacing;</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯é€šè¿‡è®¡ç®—å¹¶å¯¹æ¯ä¸€ä¸ª view è°ƒç”¨ <code>mas_makeConstraints</code>ã€‚ä½†æˆ‘ç›®å‰æ„Ÿè§‰ä¸å¦‚ä½¿ç”¨ <a href="https://nshipster.com/uistackview/"><code>UIStackView</code></a>ï¼Œå¹¶å°† distribution è®¾ç½®ä¸º <code>UIStackViewDistributionEqualSpacing</code> å’Œ <code>UIStackViewDistributionFillEqually</code>ã€‚</p><blockquote><p>ä¸è¿‡ stack view <a href="https://github.com/layoutBox/LayoutFrameworkBenchmark">æ€§èƒ½ç›¸å¯¹äº autolayout ä¼šç¨å¾®å·®ä¸€ç‚¹</a>ï¼Œä½†å¦‚æœåªæœ‰å‡ ä¸ª view æ„Ÿè§‰é—®é¢˜ä¸æ˜¯å¾ˆå¤§ã€‚</p></blockquote><blockquote><p>To be on the safe side, avoid using deeply nested stack views, especially in reusable views such as table and collection view cells. (See <a href="https://nshipster.com/uistackview/">nshipster</a>)</p></blockquote><h3 id="NSArray-MASShorthandAdditions"><a href="#NSArray-MASShorthandAdditions" class="headerlink" title="NSArray+MASShorthandAdditions"></a>NSArray+MASShorthandAdditions</h3><p>ä¸ UIView+MASShorthandAdditions ç±»ä¼¼ï¼Œæä¾›äº†åœ¨å®šä¹‰ <code>MAS_SHORTHAND</code> å®å‰æä¸‹ï¼Œå¯ä»¥åœ¨ <code>NSArray</code> ä¸Šè°ƒç”¨ <code>makeConstraints</code> æ¥ä»£æ›¿è°ƒç”¨ <code>mas_makeConstraints</code>ï¼Œè°ƒç”¨ <code>updateConstraints</code> æ¥ä»£æ›¿ <code>mas_updateConstraints</code> å’Œè°ƒç”¨ <code>remakeConstraints</code> æ¥ä»£æ›¿ <code>mas_remakeConstraints</code> çš„èƒ½åŠ›ã€‚</p><h3 id="MASViewAttribute"><a href="#MASViewAttribute" class="headerlink" title="MASViewAttribute"></a>MASViewAttribute</h3><p>ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹çš„ä¸€äº›å±æ€§ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  The view which the reciever relates to. Can be nil if item is not a view.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>, <span class="keyword">readonly</span>) MAS_VIEW *view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  The item which the reciever relates to.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>, <span class="keyword">readonly</span>) <span class="type">id</span> item;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  The attribute which the reciever relates to</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>, <span class="keyword">readonly</span>) <span class="built_in">NSLayoutAttribute</span> layoutAttribute;</span><br></pre></td></tr></table></figure><p><code>MAS_View</code> å®é™…ä¸Šæ˜¯ä¸€ä¸ª <code>UIView</code> çš„åˆ«åï¼Œå› æ­¤è¯¥ç±»å®é™…ä¸Šå°è£…äº†ä¸€ä¸ª view å’Œä¸€ä¸ª attributeï¼Œå¯¹åº”äº†æ–‡ç« å¼€å¤´ä¸­è‡ªåŠ¨å¸ƒå±€å…¬å¼ä¸­çš„ä¸€ç»„ <code>Item&#39;s Attribute</code>ã€‚</p><h3 id="MASConstraint"><a href="#MASConstraint" class="headerlink" title="MASConstraint"></a>MASConstraint</h3><p>ä»£è¡¨äº†ä¸€ä¸ªæœªæ¿€æ´»çš„ constraintï¼Œè¯¥ç±»ä¸­æä¾›äº†è¯¸å¦‚ topï¼Œleft ç­‰æ–¹æ³•ï¼Œä½†å…¶åŠŸèƒ½éƒ½éœ€è¦åœ¨å­ç±»ä¸­å®ç°ã€‚è¯¦ç»†è°ƒç”¨é€»è¾‘å¯ä»¥å‚è€ƒåé¢çš„å®ä¾‹åˆ†æéƒ¨åˆ†ã€‚</p><h3 id="MASConstraintMaker"><a href="#MASConstraintMaker" class="headerlink" title="MASConstraintMaker"></a>MASConstraintMaker</h3><p>æä¾›äº†ä¸€ä¸ª <code>install</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®é™…ä¸Šè°ƒç”¨äº†è‡ªå·±æ¯ä¸ª <code>MASConstraint</code> çš„ <code>install</code> æ–¹æ³•ï¼Œå¦‚æœ <code>removeExisting</code> æ˜¯ YESï¼Œå…ˆ <code>uninstall</code> å­˜åœ¨çš„ constraintsï¼Œå¦‚æœ <code>updateExisting</code> æ˜¯ YESï¼ŒæŠŠæ¯ä¸ª constraints çš„ updateExisting è®¾ç½®ä¸º YES.</p><p>Maker çš„å±æ€§å¦‚ left è°ƒç”¨çš„æ—¶å€™éƒ½ç›¸å½“äºæŠŠå¯¹åº”çš„ attribute æ·»åŠ åˆ° maker çš„ constraints æ•°ç»„é‡Œé¢ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ª MASConstraintsã€‚</p><p>å•ä¸ªå±æ€§è¿”å›çš„æ˜¯ä¸€ä¸ª <code>MASViewConstraint</code>ï¼Œè€Œç»„åˆå±æ€§å¦‚ edges è¿”å›çš„æ˜¯ä¸€ä¸ª <code>MASCompositeConstraint</code>ã€‚è¿™ä¸¤ä¸ªéƒ½æ˜¯ <code>MASConstraints</code> çš„å­ç±»ã€‚å®ç°äº† <code>addConstraintWithLayoutAttribute</code> æ–¹æ³•å’Œä¸€äº›å…¶ä»–é‡è¦æ–¹æ³•æ¯”å¦‚ <code>install</code>ã€‚</p><p>å…·ä½“ä½¿ç”¨é€»è¾‘å¯ä»¥å‚è€ƒåé¢çš„å®ä¾‹åˆ†æéƒ¨åˆ†ã€‚</p><h3 id="MASViewConstraint"><a href="#MASViewConstraint" class="headerlink" title="MASViewConstraint"></a>MASViewConstraint</h3><p>ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸€äº›é‡è¦å±æ€§ã€‚</p><p>å¤´æ–‡ä»¶é‡ŒåŒ…æ‹¬ä¸¤ä¸ª <code>MASViewAttribute</code>ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  First item/view and first attribute of the NSLayoutConstraint</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *firstViewAttribute;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  Second item/view and second attribute of the NSLayoutConstraint</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *secondViewAttribute;</span><br></pre></td></tr></table></figure><p>.h æ–‡ä»¶ä¸­çš„ä¸€äº›å±æ€§ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) MAS_VIEW *installedView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) MASLayoutConstraint *layoutConstraint;</span><br><span class="line"><span class="comment">/// ä¸¤ä¸ª attribute ä¹‹é—´çš„å…³ç³»ï¼Œå¯èƒ½æ˜¯ç­‰äºï¼Œå°äºç­‰äºï¼Œå¤§äºç­‰äº</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">NSLayoutRelation</span> layoutRelation;</span><br><span class="line"><span class="comment">/// é™åˆ¶çš„ä¼˜å…ˆåº¦ï¼Œé»˜è®¤æ˜¯ MASLayoutPriorityRequired</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) MASLayoutPriority layoutPriority;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> layoutMultiplier;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> layoutConstant;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="type">BOOL</span> hasLayoutRelation;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="type">id</span> mas_key;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="type">BOOL</span> useAnimator;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–æ–¹æ³•åœ¨ <code>MASConstraintMaker</code> è¢«è°ƒç”¨ï¼Œç”¨æ¥æ·»åŠ çº¦æŸï¼Œçº¦æŸé»˜è®¤çš„ <a href="https://developer.apple.com/documentation/uikit/uilayoutpriority?language=objc">priority</a> éƒ½æ˜¯ <code>MASLayoutPriorityRequired</code>ã€‚multipler éƒ½æ˜¯ 1ã€‚</p><ul><li><code>left</code> å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ delegate çš„ <code>- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(NSLayoutAttribute)layoutAttribute</code> æ–¹æ³•ï¼Œdelegate æ˜¯ <code>MASConstraintMaker</code>ã€‚é‡Œé¢æŠŠè¿™ä¸ªæ–°çš„çº¦æŸåŠ åˆ°äº† maker çš„ constraints æ•°ç»„é‡Œé¢çš„ã€‚</li><li><code>equalTo</code>ï¼Œ<code>greaterThanOrEqualTo</code> å’Œ <code>lessThanOrEqualTo</code> éƒ½è°ƒç”¨äº† <code>equalToWithRelation</code>ï¼Œä½†ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆlayoutRelationï¼‰ä¸ä¸€æ ·ï¼Œè¿™ä¸ªä¹Ÿæ˜¯åœ¨å­ç±»é‡Œé¢è¢«å®ç°çš„ã€‚<code>equalTo</code> åé¢å—¯èƒ½ç”¨æ‹¬å·æ˜¯å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ª blockã€‚å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ª viewï¼Œè®¾ç½®è‡ªå·±çš„ layoutRelation æ˜¯ relationï¼ŒsecondAttribute æ˜¯é‚£ä¸ªä¼ å…¥çš„ viewï¼ˆå¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ª NSValue æˆ–è€… CGPointï¼ŒCGSizeï¼Œå°†ä¼šå…ˆçœ‹ attribute ç¬¦ä¸ç¬¦åˆï¼Œç„¶åæ›´æ”¹ layoutConstantï¼‰ã€‚å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¼šè½¬æ¢æˆä¸€ä¸ª <code>MASCompositeConstraint</code>ã€‚</li><li><code>insets</code> è¦ä¼ å…¥ä¸€ä¸ª UIEdgeInset å‚æ•°ï¼Œå°†ä¼šå§ firstAttribute é‡Œé¢çš„å¯¹åº”å‚æ•°å˜æˆ edgeInset é‡Œé¢çš„å€¼ã€‚<code>inset</code> å®é™…è°ƒç”¨äº†ä¸€ä¸ª <code>insets</code> å¹¶å°† 4 é¢éƒ½è®¾ç½®ä¸ºä¼ å…¥çš„å€¼ã€‚<code>offset</code> æ›´æ”¹äº† <code>layoutConstant</code> å€¼ã€‚<code>mas_offset</code> å’Œä¹‹å‰çš„ <code>equalTo</code> ä¸€æ ·å¢åŠ äº† auto boxingï¼Œå¯¹äºä¼ å…¥ view å’Œ number æœ‰ä¸åŒçš„å¤„ç†ã€‚</li><li><code>with</code> å’Œ <code>and</code> éƒ½ç›´æ¥è¿”å› <code>self</code> åªæ˜¯ä¸ºäº†å¸®åŠ©é“¾å¼è°ƒç”¨çš„è¯»æ³•æ›´åŠ é€šé¡ºã€‚å¦‚ <code>make.width.and.height.equalTo(self.bottomView).with.priorityLow();</code>ï¼Œå®é™…ä½¿ç”¨æ—¶å¯ä»¥ä¸å†™ã€‚</li><li><code>priorityLow</code> å®é™…ä¸Šè°ƒç”¨äº† <code>.priority</code> å¹¶å°†å¯¹åº”çš„ä¼˜å…ˆçº§ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</li></ul><p>å…·ä½“å¦‚ä½•è¢«è°ƒç”¨å¯ä»¥å‚è€ƒåæ–‡ä¸­çš„æ¡ˆä¾‹åˆ†æ1å’Œ2ã€‚</p><h3 id="MASCompositeConstraint"><a href="#MASCompositeConstraint" class="headerlink" title="MASCompositeConstraint"></a>MASCompositeConstraint</h3><p>åŒ…å«å¤šä¸ª <code>MASViewConstraint</code> çš„ä¸€ä¸ª constraintï¼Œä¼šåœ¨é“¾å¼è°ƒç”¨åŒæ—¶è®¾ç½®å¤šä¸ª attribute æ—¶è¢«åˆ›å»ºï¼Œå¦‚ <code>make.left.and.right.equalTo(view).offset(@10)</code>ã€‚å¯¹äºçˆ¶ç±»ä¸­çš„æ–¹æ³•å®ç°åŸºæœ¬å°±æ˜¯è°ƒç”¨äº†åŒ…å«çš„æ¯ä¸€ä¸ª <code>MASViewConstraint</code> çš„åŒåæ–¹æ³•ã€‚</p><p>å…·ä½“å¦‚ä½•è¢«ç”Ÿæˆå¯ä»¥å‚è€ƒåæ–‡ä¸­çš„æ¡ˆä¾‹åˆ†æ3ã€‚</p><h3 id="å®ä¾‹åˆ†æ"><a href="#å®ä¾‹åˆ†æ" class="headerlink" title="å®ä¾‹åˆ†æ"></a>å®ä¾‹åˆ†æ</h3><h4 id="æ¡ˆä¾‹1"><a href="#æ¡ˆä¾‹1" class="headerlink" title="æ¡ˆä¾‹1"></a>æ¡ˆä¾‹1</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.mas_equalTo(view2).mas_offset(<span class="number">10</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p><code>mas_makeConstraints</code> çš„è°ƒç”¨ï¼Œåˆ›å»ºäº†ä¸€ä¸ª <code>MASConstraintMaker</code> å®ä¾‹ï¼Œå¹¶ä¸”å°†å…¶ <code>view</code> å±æ€§è®¾ç½®ä¸º <code>view1</code>ã€‚ç„¶åå°†è¯¥æ–°å»ºçš„ maker ä½œä¸ºå‚æ•°ä¼ å…¥åˆ° block ä¸­ï¼Œè°ƒç”¨æ•´ä¸ª blockã€‚</p><p>è°ƒç”¨ <code>.top</code> åˆ†åˆ«åˆ›å»ºäº†ä¸€ä¸ª attribute å’Œä¸€ä¸ª constraints</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MASViewAttribute *viewAttribute = [[MASViewAttribute alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</span><br><span class="line">MASViewConstraint *newConstraint = [[MASViewConstraint alloc] initWithFirstViewAttribute:viewAttribute];</span><br></pre></td></tr></table></figure><p>å¹¶å°†è¿™ä¸ª newConstraint çš„ delegate è®¾ç½®æˆ makerï¼Œå†å°†å…¶åŠ å…¥åˆ° maker çš„ <code>constraints</code> æ•°ç»„ä¸­ã€‚å¹¶è¿”å›ä¸€ä¸ª <code>MASViewConstraints</code>ï¼Œè¿”å›çš„å°±æ˜¯ <code>newConstraint</code>ï¼Œä¹Ÿå°±æ˜¯è¯´åé¢çš„é“¾å¼æ“ä½œå®é™…ä¸Šéƒ½æ˜¯åœ¨å¯¹ä¸€ä¸ªå·²åŠ å…¥åˆ° constraints æ•°ç»„çš„è¿›è¡Œä¿®æ”¹ã€‚</p><p><code>mas_equalTo</code> è°ƒç”¨äº† <code>MASViewConstraints</code> çš„ <code>equalToWithRelation</code> æ–¹æ³•ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª <code>id</code> ç±»å‹ï¼Œè¿™é‡Œå°† <code>view2</code> ä½œä¸ºè¿™ä¸ªå‚æ•°ä¼ å…¥ã€‚æ–¹æ³•ä¸­å°†ä¼šå°† constraints çš„ <code>layoutRelation</code> è®¾ç½®ä¸ºå¯¹åº”çš„ relationï¼Œè¿™é‡Œæ˜¯ <code>NSLayoutRelationEqual</code>ã€‚å¹¶ä¸”ä¼ å…¥ <code>view2</code> æ¥è®¾ç½® constraints çš„ <code>secondAttribute</code> å±æ€§ã€‚åœ¨ setter ä¸­ï¼Œæ–°ç”Ÿæˆä¸€ä¸ª <code>MASViewAttribute</code>ï¼Œè¯¥ <code>MASViewAttribute</code> çš„ <code>view</code> å°±æ˜¯ view2ï¼Œè€Œ <code>attribute</code> å’Œ view1 çš„ attribute ç›¸åŒã€‚æœ€åä¹ŸåŒæ ·ä¼šè¿”å›ä¸€ä¸ª <code>MASConstraint</code>ã€‚</p><blockquote><p>å¦‚æœ <code>equalTo</code> é‡Œé¢æ˜¯ä¸€ä¸ªæ•°å­—å°±ä¼šç›´æ¥å»è®¾ç½® constraints çš„ layoutConstantã€‚</p></blockquote><p><code>mas_offset</code> ä¼šæŠŠ <code>MASConstraint</code> çš„ offset è®¾ç½®ä¸º 10ï¼Œoffset çš„ setter æ–¹æ³•ä¼šå°† <code>layoutConstant</code> è®¾ç½®ä¸ºè¯¥å¸¸æ•°ï¼Œä¹‹åä»ä¼šè¿”å›ä¸€ä¸ª <code>MASConstraint</code>ï¼Œä½†åˆ°äº†æ­¤æ—¶ï¼Œä¸€ä¸ª <code>MASConstraint</code> çš„æ‰€æœ‰å±æ€§å·²ç»è®¾ç½®å®Œæˆ.</p><h4 id="æ¡ˆä¾‹2"><a href="#æ¡ˆä¾‹2" class="headerlink" title="æ¡ˆä¾‹2"></a>æ¡ˆä¾‹2</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.mas_equalTo(view2.mas_bottom).mas_offset(<span class="number">10</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>å’Œä¸Šé¢åŸºæœ¬ä¸€æ ·ï¼Œä½†æ­¤æ—¶è®¾ç½® <code>secondAttribute</code> çš„æ—¶å€™ä¼ å…¥çš„æ˜¯ä¸€ä¸ª <code>MASAttribute</code>ï¼Œè¿™ä¸ª attribute çš„ <code>view</code> å’Œ <code>item</code> å±æ€§éƒ½åˆå§‹åŒ–ä¸º <code>view2</code>ï¼ŒåŒæ—¶ <code>layoutAttribute</code> å±æ€§è¢«è®¾ç½®ä¸º <code>NSLayoutAttributeBottom</code>ã€‚<code>secondAttribute</code> è¢«ç›´æ¥è®¾ç½®ä¸ºè¿™ä¸ª attributeã€‚</p><h4 id="æ¡ˆä¾‹3"><a href="#æ¡ˆä¾‹3" class="headerlink" title="æ¡ˆä¾‹3"></a>æ¡ˆä¾‹3</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.leading.and.trailing.mas_equalTo(view2.mas_bottom).inset(<span class="number">10</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p><code>make.leading.and</code> å’Œä¸Šé¢ä¸€æ ·ï¼Œå¾€ maker çš„ constraints æ•°ç»„é‡Œé¢æ·»åŠ äº†ä¸€ä¸ª constraintsã€‚<code>MASConstraints</code> çš„ <code>.trailing</code> ä¼šè°ƒç”¨å…¶ <code>addConstraintWithLayoutAttribute</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨å­ç±»ä¸­è¢«å®ç°ï¼Œ<code>MASViewConstraints</code>  çš„è¯¥æ–¹æ³•è°ƒç”¨äº†å…¶ delegate çš„ <code>- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(NSLayoutAttribute)layoutAttribute</code> æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ <code>MASConstraintMaker</code> çš„è¯¥æ–¹æ³•ã€‚ä½†å’Œæœ€å¼€å§‹ <code>make.leading</code> è°ƒç”¨æ‰€ä¸åŒçš„æ˜¯ï¼Œä¹‹å‰çš„ç¬¬ä¸€ä¸ªå‚æ•° constraint ä¼ çš„æ˜¯ <code>nil</code>ï¼Œç°åœ¨ä¼ çš„æ˜¯ <code>self</code> ä¹Ÿå°±æ˜¯ <code>make.leading</code> ç”Ÿæˆçš„ <code>MASConstraint</code>ã€‚æ­¤æ—¶ä¼šå°†ä¸¤ä¸ª constraints åˆæˆä¸€ä¸ª <code>MASCompositeConstraint</code>ï¼Œè¯¥ç±»æ˜¯ <code>MASConstraints</code>  çš„å¦ä¸€ä¸ªå­ç±»ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *children = @[constraint, newConstraint];</span><br><span class="line">MASCompositeConstraint *compositeConstraint = [[MASCompositeConstraint alloc] initWithChildren:children];</span><br><span class="line">compositeConstraint.delegate = <span class="keyword">self</span>;</span><br><span class="line">[<span class="keyword">self</span> constraint:constraint shouldBeReplacedWithConstraint:compositeConstraint];</span><br><span class="line"><span class="keyword">return</span> compositeConstraint;</span><br></pre></td></tr></table></figure><p><code>MASCompositeConstraint</code> çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œå°†ä¼šæŠŠæ‰€æœ‰çš„ children ä¸­çš„ constraint çš„ delegate è®¾ç½®ä¸º compositeConstraint è‡ªèº«ã€‚</p><p><code>shouldBeReplacedWithConstraint</code> ä¸­å°†ä¼šæŠŠ maker ä¸­çš„ constraints å±æ€§ä¸­çš„ <code>constraint</code> æ›¿æ¢æˆ <code>compositionConstraint</code>ã€‚</p><p>æœ€åä¸€ä¸ª <code>MASCompositeConstraints</code> å°†ä¼šè¢«è¿”å›ã€‚</p><p>å¦‚æœæˆ‘ä»¬ç»§ç»­æ·»åŠ å±æ€§ï¼Œæ¯”å¦‚åœ¨ <code>trailing</code> åæ·»åŠ  <code>.bottom</code>ï¼Œæ­¤æ—¶è°ƒç”¨çš„æ˜¯ <code>MASCompositeConstraint</code> çš„ <code>addConstraintWithLayoutAttribute</code> çš„æ–¹æ³•ã€‚é‡Œé¢è°ƒç”¨äº† <code>MASConstraintsMaker</code> çš„ <code>[strongDelegate constraint:self addConstraintWithLayoutAttribute:layoutAttribute]</code> æ–¹æ³•ï¼ˆ<code>strongDelegate</code> å°±æ˜¯ compositeConstraints çš„ delegateï¼Œä¹Ÿå°±æ˜¯ makerã€‚ç”±äºç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ä¸€ä¸ª <code>nil</code> ä¹Ÿä¸æ˜¯ <code>viewConstraints</code>ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ª <code>MASConstraint</code> å¹¶è¢« <code>MASCompositeConstraints</code> åŠ å…¥åˆ° children æ•°ç»„ä¸­ã€‚</p><p><code>MASCompositeConstraints</code> çš„ <code>inset</code> æˆ–è€… <code>offset</code> æ–¹æ³•ä¼šéå†æ‰€æœ‰çš„ children ä¸­çš„å¹¶è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ï¼ˆ<code>inset</code> æˆ–è€… <code>offset</code>ï¼‰æœ€ç»ˆå…¶å®å’Œä¹‹å‰çš„ mas_offset ä¸€æ ·éƒ½æ˜¯å¯¹ constraint çš„ layoutConstant å±æ€§è¿›è¡Œäº†è®¾ç½®ï¼Œinset åªæ˜¯å¸®ä½ åœ¨ bottomï¼Œtrailing å’Œ bottom çš„æƒ…å†µä¸‹åŠ ä¸Šäº†è´Ÿå·ã€‚</p><h4 id="æœ€åæ­¥éª¤"><a href="#æœ€åæ­¥éª¤" class="headerlink" title="æœ€åæ­¥éª¤"></a>æœ€åæ­¥éª¤</h4><p>ä¸Šé¢ä¸‰ä¸ªæ¡ˆä¾‹çš„ block æ‰§è¡Œç»“æŸåéƒ½ä¼šè°ƒç”¨ maker çš„ <code>install</code> æ–¹æ³•ã€‚å…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSArray</span> *)install &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.removeExisting) &#123;</span><br><span class="line">        <span class="built_in">NSArray</span> *installedConstraints = [MASViewConstraint installedConstraintsForView:<span class="keyword">self</span>.view];</span><br><span class="line">        <span class="keyword">for</span> (MASConstraint *constraint <span class="keyword">in</span> installedConstraints) &#123;</span><br><span class="line">            [constraint uninstall];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSArray</span> *constraints = <span class="keyword">self</span>.constraints.copy;</span><br><span class="line">    <span class="keyword">for</span> (MASConstraint *constraint <span class="keyword">in</span> constraints) &#123;</span><br><span class="line">        constraint.updateExisting = <span class="keyword">self</span>.updateExisting;</span><br><span class="line">        [constraint install];</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="keyword">self</span>.constraints removeAllObjects];</span><br><span class="line">    <span class="keyword">return</span> constraints;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>removeExisting</code> å’Œ <code>updateExisting</code> ä¼šåœ¨è°ƒç”¨ <code>mas_remakeConstraints</code> å’Œ <code>mas_updateConstraints</code> çš„æ—¶å€™è¢«è®¾ç½®ã€‚å¯ä»¥çœ‹åˆ° install å°±æ˜¯éå†è‡ªå·±çš„ constraints æ•°ç»„ï¼ˆéƒ½æ˜¯åœ¨ block é‡Œé¢æ·»åŠ çš„ï¼‰ï¼Œå¹¶å¯¹é‡Œé¢çš„æ¯ä¸€ä¸ª constraint è°ƒç”¨ install æ–¹æ³•ï¼ˆè¯¥æ–¹æ³•éƒ½åœ¨å­ç±»é‡Œé¢å®ç°ï¼‰ã€‚</p><p><code>MASViewConstraints</code> å¯¹äº install çš„å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ†åˆ«æ‹¿å‡º firstAttribute å’Œ secondAttribute ä¸­çš„ itemï¼ˆitem1ï¼Œitem2ï¼‰ å’Œ attributeï¼ˆattribute1ï¼Œattribute2ï¼‰ï¼Œå¦‚æœ second attribute ä¸º nilï¼ˆæ¯”å¦‚ <code>make.left.equalTo(@10)</code>)ï¼Œä¼šå°† item2 è®¾ç½®ä¸º item1 çš„ superviewï¼Œattribute2 è®¾ç½®ä¸º attribute1ã€‚</li><li>è°ƒç”¨ç³»ç»Ÿæ–¹æ³•è·å¾—ä¸€ä¸ª layout constraints</li></ol><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MASLayoutConstraint *layoutConstraint <span class="comment">// MASLayoutConstraint æ˜¯ä¸€ä¸ª NSLayoutConstraint çš„å­ç±»</span></span><br><span class="line">        = [MASLayoutConstraint constraintWithItem:firstLayoutItem</span><br><span class="line">                                        attribute:firstLayoutAttribute</span><br><span class="line">                                        relatedBy:<span class="keyword">self</span>.layoutRelation</span><br><span class="line">                                           toItem:secondLayoutItem</span><br><span class="line">                                        attribute:secondLayoutAttribute</span><br><span class="line">                                       multiplier:<span class="keyword">self</span>.layoutMultiplier</span><br><span class="line">                                         constant:<span class="keyword">self</span>.layoutConstant];</span><br><span class="line">layoutConstraint.priority = <span class="keyword">self</span>.layoutPriority;</span><br></pre></td></tr></table></figure><ol start="3"><li>æŸ¥æ‰¾è¿™ä¸ª constraints çš„ installedViewï¼ˆè¢«æ·»åŠ åˆ°çš„ view ä¸Šï¼Œå¦‚æœ item1ï¼Œitem2éƒ½æ˜¯ viewï¼Œé‚£å°±æ˜¯ä»–ä»¬å…±åŒçš„ superviewï¼Œä»è¿™ä¸€ç‚¹ä¹Ÿå¯ä»¥çœ‹å‡ºåªæœ‰æ‹¥æœ‰åŒä¸€ä¸ª superview çš„ä¸¤ä¸ª view ä¹‹é—´æ‰èƒ½æ·»åŠ å±æ€§çº¦æŸï¼ˆåŒ…æ‹¬ä¸€ä¸ªæ˜¯å¦ä¸€ä¸ªçš„ superviewï¼‰ï¼›å¦‚æœ attribute1 æ˜¯æŸç§ size å±æ€§ï¼Œé‚£å°±æ˜¯ item1ï¼›å¦‚æœ item2 ä¸å­˜åœ¨é‚£å°±æ˜¯ item1 çš„çˆ¶ viewï¼‰æ˜¯å¦æœ‰ç›¸åŒçš„ layoutConstraint</li></ol><p>å¦‚æœå­˜åœ¨åŒæ ·çš„ layoutConstraintï¼Œå°±æ›´æ–°å¯¹åº”çš„ layoutConstraintï¼Œå› æ­¤ä½¿ç”¨ <code>mas_updateConstraints</code> è¦æ³¨æ„åªèƒ½å¸®ä½ æ›´æ–°åªä¿®æ”¹ constant çš„ constraintã€‚</p><blockquote><p>è¦æ±‚è¯¥ constraint çš„ firstItem, secondItem, firstAttribute, secondAttribute, relation, multiplier, priority ä¸€æ ·ã€‚</p></blockquote><ol start="4"><li>å¦‚æœæ²¡æœ‰ç›¸åŒçš„ constraints å°±å¯¹è¯¥ constraints è¿›è¡Œæ¿€æ´»ã€‚</li></ol><p><code>MASCompositeConstraint</code> çš„ <code>install</code> å®é™…ä¸Šå°±æ˜¯éå† children é‡Œé¢çš„æ‰€æœ‰ constraints å¹¶è°ƒç”¨å…¶ install æ–¹æ³•ã€‚</p><h4 id="æ¡ˆä¾‹æ€»ç»“"><a href="#æ¡ˆä¾‹æ€»ç»“" class="headerlink" title="æ¡ˆä¾‹æ€»ç»“"></a>æ¡ˆä¾‹æ€»ç»“</h4><ul><li><code>mas_makeConstraints</code> block ä¸­çš„ä¸€æ¡è¯­å¥ä¼šç”Ÿæˆä¸€ä¸ª <code>MASConstraints</code> çš„å­ç±»ï¼Œå¦‚æœæ˜¯å•ä¸ªçº¦æŸä¼šç”Ÿæˆä¸€ä¸ª <code>MASViewConstraints</code>ï¼Œå¦‚æœæ˜¯å¤šä¸ªçº¦æŸä¼šç”Ÿæˆä¸€ä¸ª <code>MASCompositeConstraint</code>ï¼ˆå®é™…å†…éƒ¨è¿˜æ˜¯åŒ…æ‹¬äº†å¾ˆå¤šä¸ª <code>MASViewConstraints</code>ï¼‰ã€‚</li><li><code>view.mas_top</code> è¿™æ ·çš„è¯­å¥è¿”å›çš„æ˜¯ä¸€ä¸ª <code>MASAttribute</code>ã€‚</li></ul><h3 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h3><h4 id="ä½¿ç”¨-inset-è¿˜æ˜¯-mas-offset"><a href="#ä½¿ç”¨-inset-è¿˜æ˜¯-mas-offset" class="headerlink" title="ä½¿ç”¨ inset è¿˜æ˜¯ mas_offset"></a>ä½¿ç”¨ <code>inset</code> è¿˜æ˜¯ <code>mas_offset</code></h4><p>å®é™…å®ç°éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½è®¾ç½®äº† constraint çš„ layoutConstant å±æ€§ï¼Œä½† <code>inset</code> ä¼šåœ¨ trailingï¼Œright å’Œ bottom çš„æ—¶å€™æ·»åŠ è´Ÿå·ã€‚</p><h4 id="mas-equalTo-å’Œ-equalTo"><a href="#mas-equalTo-å’Œ-equalTo" class="headerlink" title="mas_equalTo å’Œ equalTo"></a><code>mas_equalTo</code> å’Œ <code>equalTo</code></h4><p><code>mas_equalTo</code> æ˜¯ä¸€ä¸ªå®šä¹‰çš„å®ï¼Œå°†ä¼šå¯¹ä¼ å…¥å€¼è¿›è¡Œ autoboxing æˆ <code>NSNumber</code>ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> mas_equalTo(...)                 equalTo(MASBoxValue((__VA_ARGS__)))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MASBoxValue(value) _MASBoxValue(@encode(__typeof__((value))), (value)) <span class="comment">// In MASUtilities.h</span></span></span><br></pre></td></tr></table></figure><p><a href="https://nshipster.cn/type-encodings/"><code>@encode</code></a> å¾—åˆ°å€¼çš„ç±»å‹ï¼Œé€šè¿‡å¯å˜å‚æ•°åˆ—è¡¨ï¼Œä½¿ç”¨ <code>strcmp</code> å¯¹æ¯”å‚æ•°å’Œç±»å‹ï¼Œç›¸åŒæ—¶å°±å°†å‚æ•°è½¬æ¢æˆè¯¥ç±»å‹ã€‚</p><blockquote><p><code>MASConstraint (AutoboxingSupport)</code> ä¸­ä¹Ÿå®šä¹‰äº†ä¸€ä¸ª <code>mas_equal</code> ï¼‰å°†å…¶å®ç°ä¸ºå’Œ <code>equalTo</code> ä¸€è‡´ã€‚å®é™…è°ƒç”¨çš„æ—¶å€™éƒ½æ˜¯ç”¨çš„å®ï¼Œæ·»åŠ ä¸€ä¸ªåŒåçš„æ–¹æ³•èƒ½å¤Ÿä½¿å®èƒ½å¤Ÿæœ‰è‡ªåŠ¨è¡¥å…¨çš„èƒ½åŠ›ã€‚</p></blockquote><h4 id="ä½¿ç”¨-trailing-è¿˜æ˜¯-right"><a href="#ä½¿ç”¨-trailing-è¿˜æ˜¯-right" class="headerlink" title="ä½¿ç”¨ trailing è¿˜æ˜¯ right"></a>ä½¿ç”¨ <code>trailing</code> è¿˜æ˜¯ <code>right</code></h4><p>å¤§å¤šæ•°æƒ…å†µä¸‹å«ä¹‰ä¸€æ ·ï¼Œä½†è¦æ³¨æ„å¯¹äºä¸€äº›ä»å³åˆ°å·¦çš„è¯­è¨€ï¼Œæ¯”å¦‚é˜¿æ‹‰ä¼¯è¯­ï¼Œ<code>trailing</code> å®é™…ä»£è¡¨çš„æ˜¯ <code>left</code>ã€‚åŸºæœ¬ä¸Šä½¿ç”¨ <code>trailing</code> æ€»æ˜¯æ›´ä¿é™©çš„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç®€å•ä»‹ç»äº†ä¸€äº›å…³äº iOS è‡ªåŠ¨å¸ƒå±€çš„æ¦‚å¿µï¼Œå¹¶å¯¹ Masonry æ¡†æ¶è¿›è¡Œäº†åˆ†æã€‚ä¸»è¦ä»‹ç»äº† Masonry æ¡†æ¶ä¸»è¦ç»“æ„ï¼Œä½¿ç”¨æ—¶å†…éƒ¨è°ƒç”¨è¿‡ç¨‹å’Œä¸€äº›éœ€è¦æ³¨æ„çš„ç»†èŠ‚ã€‚&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
